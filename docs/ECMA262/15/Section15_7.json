{
  "$schema": "../SectionDoc.schema.json",
  "autoGeneratedHeader": true,
  "clause": "15.7",
  "title": "Class Definitions",
  "status": "Partially Supported",
  "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
  "intro": "JS2IL supports class declarations/expressions, methods (including async and generator methods), constructors (including derived constructors with super calls), and public/private instance/static fields with initializers. Limitations: class static blocks are not supported; class getters/setters are rejected; computed method/field names and private methods are rejected.",
  "parent": {
    "clause": "15"
  },
  "subclauses": [
    {
      "clause": "15.7.1",
      "title": "Static Semantics: Early Errors",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-class-definitions-static-semantics-early-errors"
    },
    {
      "clause": "15.7.2",
      "title": "Static Semantics: ClassElementKind",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-classelementkind"
    },
    {
      "clause": "15.7.3",
      "title": "Static Semantics: ConstructorMethod",
      "status": "Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-constructormethod"
    },
    {
      "clause": "15.7.4",
      "title": "Static Semantics: IsStatic",
      "status": "Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-isstatic"
    },
    {
      "clause": "15.7.5",
      "title": "Static Semantics: NonConstructorElements",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-nonconstructorelements"
    },
    {
      "clause": "15.7.6",
      "title": "Static Semantics: PrototypePropertyNameList",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-prototypepropertynamelist"
    },
    {
      "clause": "15.7.7",
      "title": "Static Semantics: AllPrivateIdentifiersValid",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-allprivateidentifiersvalid"
    },
    {
      "clause": "15.7.8",
      "title": "Static Semantics: PrivateBoundIdentifiers",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-privateboundidentifiers"
    },
    {
      "clause": "15.7.9",
      "title": "Static Semantics: ContainsArguments",
      "status": "Not Yet Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-containsarguments"
    },
    {
      "clause": "15.7.10",
      "title": "Runtime Semantics: ClassFieldDefinitionEvaluation",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-classfielddefinitionevaluation"
    },
    {
      "clause": "15.7.11",
      "title": "Runtime Semantics: ClassStaticBlockDefinitionEvaluation",
      "status": "Not Yet Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-classstaticblockdefinitionevaluation"
    },
    {
      "clause": "15.7.12",
      "title": "Runtime Semantics: EvaluateClassStaticBlockBody",
      "status": "Not Yet Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-evaluateclassstaticblockbody"
    },
    {
      "clause": "15.7.13",
      "title": "Runtime Semantics: ClassElementEvaluation",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-classelementevaluation"
    },
    {
      "clause": "15.7.14",
      "title": "Runtime Semantics: ClassDefinitionEvaluation",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-classdefinitionevaluation"
    },
    {
      "clause": "15.7.15",
      "title": "Runtime Semantics: BindingClassDeclarationEvaluation",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-bindingclassdeclarationevaluation"
    },
    {
      "clause": "15.7.16",
      "title": "Runtime Semantics: Evaluation",
      "status": "Partially Supported",
      "specUrl": "https://tc39.es/ecma262/#sec-class-definitions-runtime-semantics-evaluation"
    }
  ],
  "reference": {
    "mode": "stub",
    "note": "_Intentionally not included here. Use the tc39.es links above as the normative reference._"
  },
  "support": {
    "entries": [
      {
        "clause": "15.7.1",
        "feature": "Async instance method (async m() { await ... })",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Async/JavaScript/Async_ClassMethod_SimpleAwait.js",
          "Js2IL.Tests/Async/JavaScript/Async_ClassMethod_MultipleAwaits.js",
          "Js2IL.Tests/Async/JavaScript/Async_ClassMethod_WithThis.js",
          "Js2IL.Tests/Async/JavaScript/Async_ClassMethod_CallsOtherAsync.js"
        ],
        "notes": "Async class instance methods are compiled as resumable state machines and return a Promise; supports await points, multiple awaits, and correct this binding across suspension/resumption."
      },
      {
        "clause": "15.7.1",
        "feature": "Async static method (static async m() { await ... })",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Async/JavaScript/Async_StaticMethod_SimpleAwait.js"
        ],
        "notes": "Async class static methods are compiled as resumable state machines and return a Promise."
      },
      {
        "clause": "15.7.1",
        "feature": "Class declaration (empty)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_DeclareEmptyClass.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "Class methods and constructors accessing ancestor scope variables (global, function, block)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassMethod_AccessGlobalVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassMethod_AccessFunctionVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassMethod_AccessFunctionVariableAndGlobalVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassMethod_AccessArrowFunctionVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassMethod_AccessArrowFunctionVariableAndGlobalVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_AccessGlobalVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_AccessFunctionVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_AccessFunctionVariableAndGlobalVariable_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_AccessGlobalVariableAndParameterValue_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_AccessFunctionVariableAndParameterValue_Log.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_AccessFunctionVariableAndGlobalVariableAndParameterValue_Log.js"
        ],
        "notes": "Class methods and constructors can now access variables from all ancestor scopes (global, function, block), not just the global scope. Implementation walks the scope tree from the class's parent scope to root, building a complete ancestor chain. The scope array is passed as an argument to methods/constructors, enabling proper multi-level scope access. Supports regular functions, arrow functions, and constructor parameters. Fixed parameter indexing for constructors: when scopes are present, arg0=this, arg1=scopes[], parameters start at arg2."
      },
      {
        "clause": "15.7.1",
        "feature": "Constructor default parameters",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_DefaultParameterValue_Constructor.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_ParameterDestructuring.js"
        ],
        "notes": "Class constructors support default parameter values and destructuring with defaults. Call sites validate argument count against min/max parameter bounds and pad missing optional arguments with ldnull. Default values are applied using starg IL pattern when arguments are null. Object destructuring parameters support default values (e.g., constructor({host=\"localhost\", port=8080})) with conditional IL generation."
      },
      {
        "clause": "15.7.1",
        "feature": "Constructor return value override semantics",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_Constructor_ExplicitReturnThis.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_Constructor_ReturnObjectOverridesThis.js"
        ],
        "notes": "Implements ECMAScript constructor behavior: `new C()` returns the constructed instance unless the constructor explicitly returns an object/function (which overrides). Returning a primitive does not override."
      },
      {
        "clause": "15.7.1",
        "feature": "Constructor with multiple parameters; method uses fields",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_WithMultipleParameters.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_TwoParams_AddMethod.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_TwoParams_SubtractMethod.js"
        ],
        "notes": "Covers multi-parameter constructors and arithmetic in instance methods."
      },
      {
        "clause": "15.7.1",
        "feature": "Constructor with parameter and this.field assignment; method reads field",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_Param_Field_Log.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "Generator instance method (*m() { yield ... })",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Generator/JavaScript/Generator_ClassMethod_SimpleYield.js",
          "Js2IL.Tests/Generator/JavaScript/Generator_ClassMethod_YieldAssign.js",
          "Js2IL.Tests/Generator/JavaScript/Generator_ClassMethod_WithThis.js"
        ],
        "notes": "Generator class instance methods compile to a synchronous generator state machine and return a GeneratorObject; supports yield points and correct this binding across next() calls. yield* delegation remains unsupported (see Generator Function Definitions section)."
      },
      {
        "clause": "15.7.1",
        "feature": "Generator static method (static *m() { yield ... })",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Generator/JavaScript/Generator_StaticMethod_SimpleYield.js"
        ],
        "notes": "Generator class static methods compile to a synchronous generator state machine and return a GeneratorObject. yield* delegation remains unsupported (see Generator Function Definitions section)."
      },
      {
        "clause": "15.7.1",
        "feature": "Instance field initializer (public property default)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassProperty_DefaultAndLog.js"
        ],
        "notes": "Emitted by assigning defaults in the generated .ctor."
      },
      {
        "clause": "15.7.1",
        "feature": "Instance method (declare and call)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithMethod_HelloWorld.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "Instance method default parameters",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_DefaultParameterValue_Method.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassMethod_ParameterDestructuring.js"
        ],
        "notes": "Class instance methods support default parameter values and destructuring with defaults. Methods are registered in ClassRegistry with min/max parameter counts. Call sites validate argument count ranges and pad missing optional parameters with ldnull before callvirt. Object destructuring parameters support default values with conditional IL generation."
      },
      {
        "clause": "15.7.1",
        "feature": "Instance method implicit fallthrough return is undefined",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_Method_DefaultReturnUndefined.js"
        ],
        "notes": "Class/instance methods that reach the end without an explicit return evaluate to JS undefined (represented as CLR null), matching ECMAScript semantics."
      },
      {
        "clause": "15.7.1",
        "feature": "Private instance field (#) with helper method access",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassPrivateField_HelperMethod_Log.js"
        ],
        "notes": "Generated as a private .NET field with a mangled name; accessible only within the class."
      },
      {
        "clause": "15.7.1",
        "feature": "Static field initializer (static property default)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithStaticProperty_DefaultAndLog.js"
        ],
        "notes": "Emitted as a static field initialized in a synthesized .cctor; accessed via ldsfld."
      },
      {
        "clause": "15.7.1",
        "feature": "Static method (declare and call)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithStaticMethod_HelloWorld.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "Class inheritance via extends (class B extends A)",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_Inheritance_SuperConstructor_Args.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_Inheritance_SuperMethodCall.js"
        ],
        "notes": "Derived classes use the compiled base class as their CLR base type when resolvable, enabling direct base dispatch for instance methods."
      },
      {
        "clause": "15.7.2",
        "feature": "Class elements: methods vs. fields vs. constructors",
        "status": "Partially Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-classelementkind",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_DeclareEmptyClass.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithMethod_HelloWorld.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassProperty_DefaultAndLog.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithStaticMethod_HelloWorld.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithStaticProperty_DefaultAndLog.js"
        ],
        "notes": "JS2IL supports constructors, identifier-named methods, and identifier/private-identifier fields. Limitations: class accessors, private methods, computed names, and static blocks are not supported."
      },
      {
        "clause": "15.7.3",
        "feature": "ConstructorMethod: explicit and implicit constructors",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-constructormethod",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassConstructor_WithMultipleParameters.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_Inheritance_SuperConstructor_Args.js"
        ],
        "notes": "Supports explicit constructors and synthesizes implicit constructors (including derived implicit super() insertion)."
      },
      {
        "clause": "15.7.4",
        "feature": "IsStatic: static methods and fields",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-isstatic",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithStaticMethod_HelloWorld.js",
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassWithStaticProperty_DefaultAndLog.js",
          "Js2IL.Tests/Async/JavaScript/Async_StaticMethod_SimpleAwait.js",
          "Js2IL.Tests/Generator/JavaScript/Generator_StaticMethod_SimpleYield.js"
        ]
      },
      {
        "clause": "15.7.7",
        "feature": "AllPrivateIdentifiersValid: private field access this.#name",
        "status": "Partially Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-static-semantics-allprivateidentifiersvalid",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_ClassPrivateField_HelperMethod_Log.js"
        ],
        "notes": "Valid programs using declared private fields compile and run. Invalid private identifier usage is not fully validated per spec; some cases fail during compilation when registry resolution cannot find the field."
      },
      {
        "clause": "15.7.1",
        "feature": "Derived constructors: super(...) base constructor call",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_Inheritance_SuperConstructor_Args.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "Derived constructors: this before super throws ReferenceError",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_Inheritance_ThisBeforeSuper_Throws.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "super.m(...) base method call",
        "status": "Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/Classes/JavaScript/Classes_Inheritance_SuperMethodCall.js"
        ]
      },
      {
        "clause": "15.7.1",
        "feature": "Private methods (#m() {})",
        "status": "Not Yet Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/ValidatorTests.cs"
        ],
        "notes": "Validator rejects private methods; JS2IL currently supports private fields, but not private methods/accessors."
      },
      {
        "clause": "15.7.1",
        "feature": "Computed method names (class C { ['m']() {} })",
        "status": "Not Yet Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-class-definitions",
        "testScripts": [
          "Js2IL.Tests/ValidatorTests.cs"
        ],
        "notes": "Only identifier-named methods are registered in the ClassRegistry."
      },
      {
        "clause": "15.7.10",
        "feature": "Computed field names (class C { ['x'] = 1 })",
        "status": "Not Yet Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-classfielddefinitionevaluation",
        "testScripts": [
          "Js2IL.Tests/ValidatorTests.cs"
        ],
        "notes": "Only identifier/private-identifier field definitions are emitted as .NET fields."
      },
      {
        "clause": "15.7.11",
        "feature": "Class static blocks (static { ... })",
        "status": "Not Yet Supported",
        "specUrl": "https://tc39.es/ecma262/#sec-runtime-semantics-classstaticblockdefinitionevaluation",
        "testScripts": [
          "Js2IL.Tests/ValidatorTests.cs"
        ]
      }
    ]
  }
}
