{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://github.com/tomacox74/js2il/raw/master/docs/nodejs/ModuleDoc.schema.json",
  "title": "JS2IL Node.js Module Documentation",
  "description": "Schema for individual Node.js module documentation files",
  "type": "object",
  "additionalProperties": false,
  "required": ["name", "type", "status", "docsUrl", "nodeVersionTarget"],
  "properties": {
    "$schema": {
      "type": "string"
    },
    "autoGeneratedHeader": {
      "type": "boolean",
      "description": "When true, generator prepends an AUTO-GENERATED marker comment.",
      "default": true
    },
    "name": {
      "type": "string",
      "description": "Module or global name (e.g., 'path', '__dirname', 'console')"
    },
    "type": {
      "type": "string",
      "enum": ["module", "global"],
      "description": "Whether this is a Node module or a global"
    },
    "status": {
      "type": "string",
      "enum": ["supported", "partial", "not-supported"],
      "description": "Overall support status for this module/global"
    },
    "docsUrl": {
      "type": "string",
      "format": "uri",
      "description": "Link to official Node.js documentation"
    },
    "nodeVersionTarget": {
      "type": "string",
      "description": "Target Node.js version (e.g., '22.x LTS')"
    },
    "implementation": {
      "oneOf": [
        { "type": "string" },
        { "type": "array", "items": { "type": "string" } }
      ],
      "description": "Relative source path(s) implementing the feature"
    },
    "notes": {
      "type": "string",
      "description": "General notes about the module/global implementation"
    },
    "apis": {
      "type": "array",
      "description": "APIs provided by this module (for module type)",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["name", "kind", "status"],
        "properties": {
          "name": {
            "type": "string",
            "description": "API signature or name"
          },
          "kind": {
            "type": "string",
            "enum": ["function", "property"],
            "description": "API kind"
          },
          "status": {
            "type": "string",
            "enum": ["supported", "partial", "not-supported"],
            "description": "Support status for this specific API"
          },
          "docs": {
            "type": "string",
            "format": "uri",
            "description": "Link to Node.js docs for this specific API"
          },
          "notes": {
            "type": "string",
            "description": "Additional notes about this API"
          },
          "tests": {
            "type": "array",
            "description": "Test references for this API",
            "items": {
              "type": "object",
              "additionalProperties": false,
              "required": ["name", "file"],
              "properties": {
                "name": {
                  "type": "string",
                  "description": "Fully qualified test name"
                },
                "file": {
                  "type": "string",
                  "description": "Path to test file (optionally with line)"
                }
              }
            }
          }
        }
      }
    },
    "tests": {
      "type": "array",
      "description": "Test references for globals (for global type)",
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": ["name", "file"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Fully qualified test name"
          },
          "file": {
            "type": "string",
            "description": "Path to test file (optionally with line)"
          }
        }
      }
    }
  }
}
